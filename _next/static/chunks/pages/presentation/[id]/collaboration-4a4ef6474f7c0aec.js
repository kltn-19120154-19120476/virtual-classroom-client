(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[731],{60220:function(n,t,r){"use strict";var l=r(41664),o=r.n(l);r(67294);var s=r(67214),i=r.n(s),a=r(85893),c=function(n){var t=n.paths;return(0,a.jsx)("div",{className:i().breadcrumb,children:t.map(function(n,t){return(0,a.jsx)(o(),{href:n.href,legacyBehavior:!0,children:(0,a.jsx)("a",{children:t?(0,a.jsxs)(a.Fragment,{children:["\xbb ",n.label,"\xa0\xa0"]}):(0,a.jsxs)(a.Fragment,{children:[n.label,"\xa0\xa0"]})})},t)})})};t.Z=c},12634:function(n,t,r){"use strict";r.r(t),r.d(t,{default:function(){return F}});var l=r(59499),o=r(27812),s=r(50029),i=r(87794),a=r.n(i),c=r(41733),d=r(41715),u=r(86886),p=r(83321),x=r(99332),v=r(93946),_=r(98271),h=r(50657),f=r(31425),m=r(6514),b=r(37645),j=r(90629),w=r(7906),Z=r(295),y=r(53252),g=r(72882),O=r(53184),R=r(68509),C=r(11163),k=r(67294),E=r(87536),S=r(1405),I=r(36750),P=r(60220),N=r(28639),X=r(7456),A=r(63980),B=r(94897),W=r.n(B),H=r(85893);function T(n,t){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,l)}return r}function D(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){(0,l.Z)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function F(){var n,t,r,l,i,B,T=(0,k.useState)(null),F=T[0],K=T[1],V=(0,C.useRouter)(),z=(0,k.useState)(!1),L=z[0],U=z[1],Y=(0,k.useContext)(X.V),q=Y.user,G=Y.isLoadingAuth,J=(0,k.useState)(!0),M=J[0],Q=J[1],$=(0,E.cI)({mode:"onChange"}),ee=$.register,en=$.handleSubmit,et=(0,k.useState)(!1),er=et[0],el=et[1],eo=(l=(0,s.Z)(a().mark(function n(t){var r,l,o;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,S.OV)({collaboratorEmail:t.collaboratorEmail,presentationId:F._id,userId:F.ownerId});case 3:if((null==(r=n.sent)?void 0:r.status)!=="OK"){n.next=9;break}return n.next=7,(0,A.Xr)("SUCCESS","Add collaborator successfully!");case 7:el(!1),V.reload();case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,(0,A.Xr)("ERROR",null===n.t0||void 0===n.t0?void 0:null===(l=n.t0.response)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.message);case 15:case"end":return n.stop()}},n,null,[[0,11]])})),function(n){return l.apply(this,arguments)}),es=(i=(0,s.Z)(a().mark(function n(){var t,r,l,s,i,c;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,S.FE)(V.query.id);case 3:if("OK"!==(t=n.sent).status){n.next=17;break}return(null===(r=s=t.data[0])||void 0===r?void 0:r.ownerId)!==(null==q?void 0:q._id)&&V.back(),n.next=9,(0,I.h9)([s.ownerId].concat((0,o.Z)(s.collaborators)));case 9:i=n.sent,c={},null==i||null===(l=i.data)||void 0===l||l.forEach(function(n){return c[null==n?void 0:n._id]=n}),s.collaborators=s.collaborators.map(function(n){return c[n]}),s=D(D({},s),{},{owner:c[s.ownerId]}),K(s),n.next=20;break;case 17:return n.next=19,(0,A.Xr)("ERROR","Presentation not found!");case 19:V.push("/presentation");case 20:n.next=26;break;case 22:n.prev=22,n.t0=n.catch(0),V.push("/presentation"),Q(!1);case 26:Q(!1);case 27:case"end":return n.stop()}},n,null,[[0,22]])})),function(){return i.apply(this,arguments)});(0,k.useEffect)(function(){es()},[]);var ei,ea=(B=(0,s.Z)(a().mark(function n(t){var r,l,o,s,i,c;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r={userId:null==F?void 0:F.ownerId,presentationId:null==F?void 0:F._id,collaboratorId:null==t?void 0:t._id},n.next=4,(0,S.wW)(r);case 4:if((null==(l=n.sent)?void 0:l.status)!=="OK"){n.next=11;break}return n.next=8,(0,A.Xr)("SUCCESS","Remove collaborator ".concat(t.name," successfully!"));case 8:V.reload(),n.next=13;break;case 11:return n.next=13,(0,A.Xr)("ERROR",null===(o=e.response)||void 0===o?void 0:null===(s=o.data)||void 0===s?void 0:s.message);case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n.catch(0),n.next=19,(0,A.Xr)("ERROR",null===(i=n.t0.response)||void 0===i?void 0:null===(c=i.data)||void 0===c?void 0:c.message);case 19:case"end":return n.stop()}},n,null,[[0,15]])})),function(n){return B.apply(this,arguments)}),ec=(ei=(0,s.Z)(a().mark(function n(){var t,r,l,o,s,i;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=V.query.id,n.next=4,(0,S.Pg)(t);case 4:if((null==(r=n.sent)?void 0:r.status)!=="OK"){n.next=11;break}return n.next=8,(0,A.Xr)("SUCCESS","Remove presentation ".concat(F.name," successfully!"));case 8:window.location.href=(0,A.H8)("/presentation"),n.next=13;break;case 11:return n.next=13,(0,A.Xr)("ERROR",null===(l=e.response)||void 0===l?void 0:null===(o=l.data)||void 0===o?void 0:o.message);case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n.catch(0),n.next=19,(0,A.Xr)("ERROR",null===(s=n.t0.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message);case 19:case"end":return n.stop()}},n,null,[[0,15]])})),function(){return ei.apply(this,arguments)});return M||G||!q?(0,H.jsx)(N.Z,{}):(0,H.jsxs)(u.ZP,{container:!0,spacing:6,className:W().wrapper,children:[(0,H.jsx)(P.Z,{paths:[{label:"Home",href:"/"},{label:"Presentation",href:"/presentation"},{label:null==F?void 0:F.name,href:"/presentation/".concat(null==F?void 0:F._id)}]}),(0,H.jsxs)(u.ZP,{item:!0,xs:12,style:{display:"flex",justifyContent:"flex-end"},children:[(0,H.jsx)(p.Z,{className:"custom-button",variant:"contained",onClick:function(){return el(!0)},startIcon:(0,H.jsx)(d.Z,{}),children:"Add a collaborator"}),(0,H.jsx)(p.Z,{sx:{marginLeft:"15px"},variant:"outlined",color:"error",onClick:function(){return U(!0)},startIcon:(0,H.jsx)(c.Z,{}),children:"Delete"})]}),(0,H.jsx)(u.ZP,{item:!0,xs:12,children:(0,H.jsx)("h1",{style:{textAlign:"center"},children:null==F?void 0:F.name})}),(0,H.jsx)(u.ZP,{item:!0,xs:12,children:(0,H.jsx)(g.Z,{component:j.Z,children:(0,H.jsxs)(w.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,H.jsx)(O.Z,{className:W().tableHead,children:(0,H.jsxs)(R.Z,{children:[(0,H.jsx)(y.Z,{align:"center",children:"Name"}),(0,H.jsx)(y.Z,{align:"center",children:"Email"}),(0,H.jsx)(y.Z,{align:"center",children:"Role"}),(null==q?void 0:q._id)===(null==F?void 0:F.ownerId)&&(0,H.jsx)(y.Z,{align:"center",children:"Action"})]})}),(0,H.jsxs)(Z.Z,{children:[(0,H.jsxs)(R.Z,{className:W().ownerRow,children:[(0,H.jsx)(y.Z,{align:"center",children:null==F?void 0:null===(n=F.owner)||void 0===n?void 0:n.name}),(0,H.jsx)(y.Z,{align:"center",children:null==F?void 0:null===(t=F.owner)||void 0===t?void 0:t.email}),(0,H.jsx)(y.Z,{align:"center",children:"OWNER"}),(0,H.jsx)(y.Z,{align:"center",children:(0,H.jsx)(x.Z,{title:"Add new collaborator",children:(0,H.jsx)(v.Z,{onClick:function(){return el(!0)},children:(0,H.jsx)(d.Z,{})})})})]},null==F?void 0:F.ownerId),null==F?void 0:null===(r=F.collaborators)||void 0===r?void 0:r.map(function(n){return(0,H.jsxs)(R.Z,{className:W().memberRow,children:[(0,H.jsx)(y.Z,{align:"center",children:null==n?void 0:n.name}),(0,H.jsx)(y.Z,{align:"center",children:null==n?void 0:n.email}),(0,H.jsx)(y.Z,{align:"center",children:"COLLABORATOR"}),(0,H.jsx)(y.Z,{align:"center",children:(null==q?void 0:q._id)===(null==F?void 0:F.ownerId)&&(0,H.jsx)(x.Z,{title:"Remove collaborator",children:(0,H.jsx)(v.Z,{color:"error",onClick:function(){return ea(n)},children:(0,H.jsx)(c.Z,{})})})})]},null==n?void 0:n._id)})]})]})})}),(0,H.jsx)(h.Z,{open:er,onClose:function(){return el(!1)},style:{width:"100%"},children:(0,H.jsxs)("form",{onSubmit:en(eo),children:[(0,H.jsx)(b.Z,{id:"alert-dialog-title",children:"Invite a collaborator by email"}),(0,H.jsx)(m.Z,{style:{overflowY:"initial"},children:(0,H.jsx)(_.Z,D(D({label:"Collaborator's email",placeholder:"Enter collaborator's email"},ee("collaboratorEmail")),{},{type:"email",required:!0,fullWidth:!0}))}),(0,H.jsxs)(f.Z,{children:[(0,H.jsx)(p.Z,{className:"custom-button-outlined",variant:"outlined",onClick:function(){return el(!1)},children:"Cancel"}),(0,H.jsx)(p.Z,{className:"custom-button",variant:"contained",type:"submit",children:"Add"})]})]})}),(0,H.jsxs)(h.Z,{open:L,onClose:function(){return U(!1)},children:[(0,H.jsx)(b.Z,{id:"alert-dialog-title",children:"Please confirm to delete this presentation"}),(0,H.jsxs)(f.Z,{children:[(0,H.jsx)(p.Z,{className:"custom-button-outlined",variant:"outlined",onClick:function(){return U(!1)},children:"Cancel"}),(0,H.jsx)(p.Z,{color:"error",variant:"contained",onClick:ec,children:"Delete"})]})]})]})}},55291:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/presentation/[id]/collaboration",function(){return r(12634)}])},67214:function(n){n.exports={breadcrumb:"styles_breadcrumb__wHumR"}},94897:function(n){n.exports={slide:"styles_slide__YBNz1",previewSlide:"styles_previewSlide__ziNI_",buttonGroup:"styles_buttonGroup__CYvIT",zoomButton:"styles_zoomButton__Mm10x",wrapper:"styles_wrapper__737dn",ownerRow:"styles_ownerRow__te6FY",coOwnerRow:"styles_coOwnerRow__T_231",memberRow:"styles_memberRow__Y8FF6",slidesList:"styles_slidesList__CeHP9",slideItem:"styles_slideItem__DxGJ0",index:"styles_index__HuUkC",previewSlideItem:"styles_previewSlideItem__F2n2d",deleteButton:"styles_deleteButton__0BIgJ",selected:"styles_selected__EMBEl",presentationSlideCol:"styles_presentationSlideCol__KARJv",previewPresentationSlideCol:"styles_previewPresentationSlideCol__lSQVI",buttonWrapper:"styles_buttonWrapper__vB_zk",previewTitle:"styles_previewTitle__4KoGq",userVoteViewWrapper:"styles_userVoteViewWrapper__T8K_z",fullWidth:"styles_fullWidth__UXZMp",tableHead:"styles_tableHead___slEJ"}}},function(n){n.O(0,[271,536,645,886,562,228,774,888,179],function(){return n(n.s=55291)}),_N_E=n.O()}]);